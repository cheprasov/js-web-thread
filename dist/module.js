module.exports=function(e){var r={};function t(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var o in e)t.d(n,o,function(r){return e[r]}.bind(null,o));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},t.p="",t(t.s=0)}([function(e,r,t){"use strict";function n(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}t.r(r);var o=new Map,a=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,a;return r=e,a=[{key:"createJavaScriptObjectUrl",value:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(r&&o.has(e))return o.get(e);var t=new Blob([e],{type:"text/javascript"}),n=URL.createObjectURL(t);return r&&o.set(e,n),n}}],(t=null)&&n(r.prototype,t),a&&n(r,a),e}();function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function c(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s(e){var r="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(t=e,-1===Function.toString.call(t).indexOf("[native code]")))return e;var t;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==r){if(r.has(e))return r.get(e);r.set(e,n)}function n(){return l(e,arguments,p(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),f(n,e)})(e)}function l(e,r,t){return(l=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,r,t){var n=[null];n.push.apply(n,r);var o=new(Function.bind.apply(e,n));return t&&f(o,t.prototype),o}).apply(null,arguments)}function f(e,r){return(f=Object.setPrototypeOf||function(e,r){return e.__proto__=r,e})(e,r)}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var v=function(e){function r(e){var t,n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),n=this,t=!(o=p(r).call(this,a))||"object"!==i(o)&&"function"!=typeof o?c(n):o,d(c(c(t)),"type",void 0),d(c(c(t)),"data",void 0),t.type=e,t.data=u,t}var t,n,o;return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(r&&r.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),r&&f(e,r)}(r,s(Error)),t=r,(n=[{key:"getType",value:function(){return this.type}},{key:"getData",value:function(){return this.data}}])&&u(t.prototype,n),o&&u(t,o),r}();function h(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function m(e,r,t){return r in e?Object.defineProperty(e,r,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[r]=t,e}var y=function(){function e(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),m(this,"worker",void 0),m(this,"promiseCompletionsMap",void 0),m(this,"options",void 0),this.options=t,this.promiseCompletionsMap=new Map,this.worker=new Worker(e.createWorkerBlobFile(r,t),{name:t.name,type:t.type,credentials:t.credentials}),this.worker.onmessage=this._onMessage.bind(this),this.worker.onmessageerror=this._onMessageError.bind(this),this.worker.onerror=this._onError.bind(this)}var r,t,n;return r=e,n=[{key:"isSupported",value:function(){try{return!!(URL&&URL.createObjectURL&&Blob&&Worker)}catch(e){return!1}}},{key:"createWorkerBlobFile",value:function(e,r){var t=r.importScripts?"importScripts('".concat(r.importScripts.join("', '"),"');"):"",n="function"==typeof e?Function.toString.call(e):e;return a.createJavaScriptObjectUrl("'use strict';\n            \n                ".concat(t,"\n                \n                var threadFunc = ").concat(n,";\n\n                var workerCommandExec = function(data) {\n                    var result = threadFunc.apply(threadFunc, data.args);\n                    self.postMessage({\n                        status: '").concat("ok","',\n                        promiseId: data.promiseId,\n                        result: result\n                    });\n                };\n\n                var workerCommandClose = function(data) {\n                    self.postMessage({\n                        status: '").concat("ok","',\n                        promiseId: data.promiseId,\n                        result: true\n                    });\n                    self.close();\n                };\n\n                var workerSendError = function(data, error) {\n                    self.postMessage({\n                        status: '").concat("error","',\n                        promiseId: data.promiseId,\n                        error: {\n                            type: error.name || 'Error',\n                            message: error.message,\n                        }\n                    });\n                };\n\n                self.onmessage = function(event) {\n                    try {\n                        switch (event.data.command) {\n                            case '").concat("exec","':\n                                workerCommandExec(event.data);\n                                break;\n                            case '").concat("close","':\n                                workerCommandClose(event.data);\n                                break;\n                            default:\n                                workerSendError(event.data, {\n                                    name: '").concat("WorkerCommand","',\n                                    message: 'Wrong command \"' + event.data.command + '\"' \n                                });\n                        }\n                    } catch (error) {\n                        workerSendError(event.data, error);\n                    }\n                };\n\n                // see: https://developer.mozilla.org/en-US/docs/Web/API/DedicatedWorkerGlobalScope/onmessageerror\n                self.onmessageerror = function(event) {\n                    var error = {\n                        name: '").concat("WorkerOnMessageError","',\n                        message: 'The onmessageerror event handler of the DedicatedWorkerGlobalScope interface is '\n                            + 'an EventListener, called whenever an MessageEvent of type messageerror is fired on '\n                            + 'the worker—that is, when it receives a message that cannot be deserialized.'\n                    };\n                    workerSendError(event.data, error);\n                };\n            "))}}],(t=[{key:"_getNewPromiseId",value:function(){var e,r=Date.now(),t=0;do{e="".concat(r,"-").concat(t),t+=1}while(this.promiseCompletionsMap.has(e));return e}},{key:"_createError",value:function(e){return new v(e.type,e.message)}},{key:"_onMessage",value:function(e){var r=e.data.promiseId,t=this.promiseCompletionsMap.get(r);if(t){switch(e.data.status){case"ok":t.resolve(e.data.result);break;case"error":t.reject(this._createError(e.data.error));break;default:t.reject(new v("WrongMessageStatus","Incorrect message status: ".concat(e.data.status),e.data))}this.promiseCompletionsMap.delete(r)}}},{key:"_onMessageError",value:function(e){var r=e.data.promiseId,t=this.promiseCompletionsMap.get(r);t&&t.reject(new v("OnMessageError","The onmessageerror event handler of the Worker interface is an EventListener, called whenever anMessageEvent of type messageerror is fired on the Worker instance — that is, when it receives a message that cannot be deserialized.",e)),this.promiseCompletionsMap.delete(r)}},{key:"_onError",value:function(e){var r=this;this.promiseCompletionsMap.forEach(function(t,n){t.reject(e),r.promiseCompletionsMap.delete(n)}),this.options.onError&&this.options.onError(e)}},{key:"_postMessage",value:function(e){var r=this;return new Promise(function(t,n){e.promiseId||(e.promiseId=r._getNewPromiseId()),r.promiseCompletionsMap.set(e.promiseId,{resolve:t,reject:n});try{r.worker.postMessage(e)}catch(e){n(e)}})}},{key:"exec",value:function(){for(var e=arguments.length,r=new Array(e),t=0;t<e;t++)r[t]=arguments[t];var n={command:"exec",args:r};return this._postMessage(n)}},{key:"close",value:function(){var e={command:"close"};return this._postMessage(e)}},{key:"terminate",value:function(){this.worker.terminate()}}])&&h(r.prototype,t),n&&h(r,n),e}();function b(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var g=function(){function e(r){var t,n,o;!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e),o=void 0,(n="threadFunc")in(t=this)?Object.defineProperty(t,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):t[n]=o,this.threadFunc=r}var r,t,n;return r=e,n=[{key:"isSupported",value:function(){try{return setTimeout&&"function"==typeof setTimeout||!1}catch(e){return!1}}}],(t=[{key:"exec",value:function(){for(var e=this,r=arguments.length,t=new Array(r),n=0;n<r;n++)t[n]=arguments[n];return new Promise(function(r){setTimeout(function(){return r(e.threadFunc.apply(e,t))},0)})}},{key:"close",value:function(){return this.threadFunc=function(){},Promise.resolve(!0)}},{key:"terminate",value:function(){this.threadFunc=function(){}}}])&&b(r.prototype,t),n&&b(r,n),e}();function w(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var k=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,n;return r=e,n=[{key:"isSupported",value:function(){return!0}}],(t=[{key:"exec",value:function(){return Promise.resolve()}},{key:"close",value:function(){return Promise.resolve(!0)}},{key:"terminate",value:function(){}}])&&w(r.prototype,t),n&&w(r,n),e}();function j(e,r){for(var t=0;t<r.length;t++){var n=r[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var M=function(){function e(){!function(e,r){if(!(e instanceof r))throw new TypeError("Cannot call a class as a function")}(this,e)}var r,t,n;return r=e,n=[{key:"createThread",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return y.isSupported()?this.createWorkerThread(e,r):g.isSupported()?this.createTimeoutThread(e,r):this.createNoopThread(e,r)}},{key:"createWorkerThread",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new y(e,r)}},{key:"createTimeoutThread",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new g(e,r)}},{key:"createNoopThread",value:function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new k(e,r)}}],(t=null)&&j(r.prototype,t),n&&j(r,n),e}();t.d(r,"ThreadFactory",function(){return M}),t.d(r,"WorkerThread",function(){return y}),t.d(r,"TimeoutThread",function(){return g}),t.d(r,"NoopThread",function(){return k}),t.d(r,"WorkerError",function(){return v})}]);